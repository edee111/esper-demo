input {
  file {
    path => "/media/win/Users/e/Documents/Git/esper-demo/event.log"
    start_position => beginning
  }
}

filter {
  grok {
    match => [ "message", "%{TIMESTAMP_ISO8601:timestamp_log} %{THREAD:thread} %{LOGLEVEL:log_level}  %{JAVACLASS:logger} %{JMXSERVICEURI:server} %{MEMORYUSAGE:event_type} %{WORD:field1} %{NONNEGINT:totalMemory:int} %{WORD:field2} %{NONNEGINT:usage:int} %{WORD:field3} %{TIMESTAMP_ISO8601:event_timestamp}" ]
    match => [ "message", "%{TIMESTAMP_ISO8601:timestamp_log} %{THREAD:thread} %{LOGLEVEL:log_level}  %{JAVACLASS:logger} %{JMXSERVICEURI:server} %{CPULOAD:event_type} %{WORD:field1} %{BASE16FLOAT:load:float} %{WORD:field2} %{TIMESTAMP_ISO8601:event_timestamp}" ]
  }
}

output {
  elasticsearch_http {
    host => localhost
  }
  stdout { codec => rubydebug }
}
